# 가비지 컬렉션
도달 가능성(reachability)개념을 사용해 메모리 관리. 
도달 가능한 값은 메모리에서 삭제하지 않음
자바스크립트 엔진 내에서 가비지 컬렉터는 끊임없이 동작하고 모든 객체를 모니터링하고 도달할수 없는 객체는 삭제함.

**삭제하지않는 값**
- 현재 함수의 지역 변수와 매개변수
- 중첩 함수의 체인에 있는 함수에서 사용되는 변수와 매개변수
- 전역변수
- 기타등등..
이런값은 루트(Root)라고 함.


## 내부 알고리즘
가비지 컬렉션 기본 알고리즘을 mark-and-sweep 이라 함.

**가비지컬렉션의 수행단계**
- 가비지 컬렉터는 루트(root) 정보를 수집하고 이를'mark(기억)'함
- 루트가 참조하고있는 모든 객체를 방문하고 'mark'함
- mark된 모든 객체에 방문하고 그 객체들이 참조하는 객체도 mark함. 한번 방문한 객체는 전부 mark하기때문에 같은 객체를 다시 방문하지 않음
- 루트에서 도달 가능한 모든 객체를 방문할때까지 위 과정을 반복
- mark되지않은 모든 객체를 메모리에서 삭제
루트에서 페인트를 붓는다고 생각하면 쉬움. 도달가능한 객체엔 페인트가 칠해지고 페인트가 칠해지지않으면 삭제.

**가비지 컬렉션의 최적화 기법**
- **generational collection(세대별 수집)** - 객체를 새로운객체와 오래된객체로 나눔. 생성 이후 제 역할을 빠르게 수행하고 쓸모없어지는 객체를 '새로운 객체'로 구분. 이런 객체를 공격적으로 메모리에서 제거.
일정 시간 이상 동안 살아남은 객체는 '오래된 객체'로 분류하고 가비지컬렉터가 덜 감시함.
- **incremental collection(점진적 수집)** - 가비지 컬렉션에 많은 리소스가 사용돼서 실행 속도가 느려지는 상황을 개선하기위해 자바스크립트 엔진은 가비지 컬렉션을 여러 부분으로 분리한 다음, 각 부분을 별도로
수행함. 작업을 분리하고, 변경 사항을 추적하는데 추가 작업이 필요하지만 긴 지연을 짧은 지연 여러개로 분산시킬수 있는 장점이 있음.
- **idel-time collection(유휴 시간 수집)** - 실행헤 주는 영향을 최소화 하기 위해 CPU가 유휴 상태일때만 가비지 컬렉션을 실행함.


# 요약
- 가비지 컬렉션은 엔진이 자동으로 수행하므로 개발자는 억지로 실행하거나 막을 수 없음
- 객체는 도달 가능한 상태일 때 메모리에 남음
- 참조된다고 해서 도달 가능한것은 아님. 서로 연결된 객체들도 도달 불가능할 수 있음
